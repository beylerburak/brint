# Frontend Sorunları
- [High] Yanlış `params` tipi: Next App Router `params` nesnesi Promise değildir. Birçok sayfa/layout’ta `params: Promise<...>` kullanılıyor ve `await params` yapılıyor (`app/[locale]/layout.tsx`, `app/[locale]/[workspace]/layout.tsx`, `app/[locale]/[workspace]/(workspace-pages)/layout.tsx`, `app/[locale]/[workspace]/(workspace-pages)/page.tsx`, `app/[locale]/[workspace]/[brandSlug]/layout.tsx`, `app/[locale]/[workspace]/[brandSlug]/page.tsx`, `app/[locale]/[workspace]/(workspace-pages)/settings/page.tsx`). Bu, tür hatalarına ve runtime’da beklenmedik davranışlara yol açabilir.
- [High] Locale ve yönlendirme tutarsızlığı: Birçok yönlendirme locale bilgisini düşürüyor veya varsayıyor (`app/[locale]/page.tsx` onboarding/login yönlendirmeleri locale’siz; `app/[locale]/onboarding/page.tsx` hata durumunda `/login`e locale’siz gidiyor; `WorkspaceProvider` içerisinde `/onboarding` redirect’i locale’siz; `components/login-form.tsx` locale çıkarımı path split ile yapılıyor). Locale ön eki olmayan yönlendirmeler SEO ve kullanıcı deneyimini bozuyor.
- [High] Sert kodlanmış API host’ları: `lib/api-client.ts` default olarak `http://localhost:3001` kullanıyor; `components/login-form.tsx` ve `app/[locale]/[workspace]/(workspace-pages)/settings/profile/page.tsx` doğrudan `http://localhost:3001` endpoint’lerine fetch atıyor. Ortam değişkeni olmayan bu çağrılar prod/staging’de kırılır.
- [High] Kimlik doğrulama/middleware güvenliği: `middleware.ts` içinde JWT payload’ı imza doğrulaması olmadan base64 decode edilip expiry/onboarding kontrolleri yapılıyor; yanıltıcı veya manipüle edilmiş cookie payload’ı ile yönlendirme kararları alınabilir.
- [High] `WorkspaceProvider` yönlendirme ve veri sapmaları (`contexts/workspace-context.tsx`): Çalışma alanı bulunamadığında `window.location.href` ile locale’siz redirect yapıyor; SSR’de kırılgan. `/me` özetinden gelen verileri detaymış gibi doldurup `ownerUserId`, `createdAt` gibi alanları boş stringlerle set ediyor; veri tutarsızlığı riski.
- [High] Giriş formunda parola saklama ve ham fetch (`components/login-form.tsx`): Email doğrulaması eksik olduğunda parola/eposta `sessionStorage`’a yazılıyor ve ham fetch ile login yapılıyor; ortak API client ve güvenli saklama katmanı yok.
- [Medium] Aşırı büyük ve tek dosya API katmanı (`lib/api-client.ts`, ~2k satır): Tüm domain çağrıları, cache yönetimi, hata/redirect davranışı ve cookie temizleme tek dosyada; responsibilty ayrımı yok, tekrar kullanılabilirlik ve test edilebilirlik düşüyor. 401’de `window.location.href = '/'` gibi SSR kıran davranışlar içeriyor.
- [Medium] İstemci tarafına taşınmış yönlendirmeler ve veri yükleme: Kök sayfa (`app/[locale]/page.tsx`) ve brand home dahil pek çok sayfa tüm veriyi client fetch ile alıyor; SSR/RSC avantajları kullanılmıyor, ilk yükte FOUC ve geç yüklenme riski var.
- [Medium] Navigasyon verisi placeholder: `features/workspace/workspace-nav-menu.tsx` içinde birçok menü öğesi `url: "#"`, brand nav ve workspace nav izin/özellik durumlarına göre filtrelenmiyor. Bu, ölü linkler ve kullanıcı yanılgısı yaratıyor.
- [Medium] İçerik account selector’da manuel DOM manipülasyonu (`features/content/content-creation/components/content-account-selector.tsx`): `img` onError içinde DOM’a manuel node ekleme yapılıyor; React’in sanal DOM’una aykırı, hydration/perf sorunları ve test zorluğu yaratır.
- [Medium] Görev sayfası dosya çoğaltmaları (`app/[locale]/[workspace]/[brandSlug]/tasks/page.tsx`, `page.backup.tsx`, `page.refactored.tsx`): Hangi sürümün kullanılacağı belirsiz, bakım ve refactor sırasında hata riski.
- [Medium] Profil ayarları sayfasında sert kodlu endpoint ve dağınık form yönetimi (`app/[locale]/[workspace]/(workspace-pages)/settings/profile/page.tsx`): Username check ve profil güncelleme için sabit host, ham fetch ve çoklu `console.log`; API client ve ortak hata/güvenlik katmanları devre dışı.
- [Medium] WebSocket URL kuralları: `hooks/use-websocket.ts` ve `hooks/use-publication-websocket.ts` hostu `http` → `ws` replace ile üretiyor; `https` ortamında `wss` zorlanmıyor, mixed-content riski var.
- [Low] Çeviri kapsamı eksikleri: Login/signup/onboarding ve bazı brand/workspace metinleri düz İngilizce string; `next-intl` set-up’ı olmasına rağmen i18n kapsamı tutarsız, anahtarlar ile stringler karışık.
